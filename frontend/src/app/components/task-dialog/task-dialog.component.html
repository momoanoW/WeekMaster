<div class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center"> 
<!-- HINTERGRUND feste Position, ganzer Bildschirm, schwarzer Hintergrund, 50% durchsichtig, 
     Flexbox-Layout, horizontal zentriert, vertikal zentriert -->

  <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[80vh] overflow-auto">  
  <!-- DIALOG-FENSTER: weißer Hintergrund, 24px Innenabstand, abgerundete Ecken, großer Schatten, volle Breite, max-Breite 32rem (max-w-lg), max-Höhe 80vh, overflow-auto für Scrollen bei Überlauf -->

    <div class="flex justify-between items-center mb-4"> 
    <!-- ERSTE ZEILE Flexbox-Layout, maximaler Abstand zwischen Elementen, vertikal zentriert, 
         16px Abstand nach unten -->
      <h2 class="text-2xl font-bold">Neue Aufgabe notieren</h2> <!-- 24px Schrift, fette Schrift -->
      <button (click)="sendCloseSignal()" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button> <!-- BUTTON zum Schliessen-->
      <!-- mittleres Grau, dunkles Grau beim Darüberfahren, 24px Schrift -->
    </div>

    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()"> <!-- FORMULAR -->
      <div class="mb-4"> <!-- ERSTE ZEILE 16px Abstand nach unten -->
        <label for="beschreibung" class="block text-sm font-medium text-gray-700 mb-1">Beschreibung</label> 
        <input type="text" id="beschreibung" formControlName="beschreibung" placeholder="Aufgabenname eingeben"
               class="form-input shadow-xl focus:ring-4 focus:ring-pink-300"> 
        <!-- Texteingabefeld mit besonderen Effekten -->
      </div>

      <div class="mb-4"> <!-- ZWEITE ZEILE 16px Abstand nach unten -->
        <label for="user" class="block text-sm font-medium text-gray-700 mb-1">User</label>
        <select id="user" formControlName="users_name" class="form-select">
          <option *ngFor="let user of users" [value]="user.users_name">{{ user.users_name }}</option>
        </select>
      </div>

      <div class="mb-4"> <!-- DRITTE ZEILE - Frist-Checkbox -->
        <label class="flex items-center">
          <input type="checkbox" formControlName="hat_frist" class="mr-2">
          <span class="text-sm font-medium text-gray-700">Hat Frist</span>
        </label>
      </div>

      <div class="mb-4 grid grid-cols-2 gap-4" *ngIf="taskForm.get('hat_frist')?.value"> <!-- VIERTE ZEILE - nur wenn hat_frist=true -->
        <div>
          <label for="frist_datum" class="block text-sm font-medium text-gray-700 mb-1">Frist-Datum</label> 
          <input type="date" id="frist_datum" formControlName="frist_datum" class="form-input">
        </div>
        <div>
          <label for="vorlaufzeit" class="block text-sm font-medium text-gray-700 mb-1">Vorlaufzeit (Tage)</label>
          <input type="number" id="vorlaufzeit" formControlName="vorlaufzeit_tage" placeholder="0" class="form-input">
        </div>
      </div>

      <div class="mb-4"> <!-- VIERTE ZEILE 16px Abstand nach unten -->
        <label class="block text-sm font-medium text-gray-700 mb-2">Priorität</label>
        <div class="flex gap-4"> <!-- Flexbox mit 16px Abstand zwischen Elementen -->
          <label class="flex items-center">
            <input type="radio" formControlName="prio_name" value="Default" class="mr-2">
            <span>Default</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="prio_name" value="Niedrig" class="mr-2">
            <span>Niedrig</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="prio_name" value="Mittel" class="mr-2">
            <span>Mittel</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="prio_name" value="Hoch" class="mr-2">
            <span>Hoch</span>
          </label>
        </div>
      </div>

      <div class="mb-4"> <!-- FÜNFTE ZEILE 16px Abstand nach unten -->
        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
        <div class="grid grid-cols-2 gap-4"> <!-- Grid layout für bessere Übersicht bei mehr Status -->
          <label class="flex items-center">
            <input type="radio" formControlName="status_name" value="Default" class="mr-2">
            <span>Default</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="status_name" value="Offen" class="mr-2">
            <span>Offen</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="status_name" value="In Bearbeitung" class="mr-2">
            <span>In Bearbeitung</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="status_name" value="Erledigt" class="mr-2">
            <span>Erledigt</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="status_name" value="Problem" class="mr-2">
            <span>Problem</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="status_name" value="Beobachten" class="mr-2">
            <span>Beobachten</span>
          </label>
          <label class="flex items-center">
            <input type="radio" formControlName="status_name" value="Abstimmung nötig" class="mr-2">
            <span>Abstimmung nötig</span>
          </label>
        </div>
      </div>

      <div class="mb-4"> <!-- SECHSTE ZEILE - Tags -->
        <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
        <div class="grid grid-cols-2 gap-4" formArrayName="selectedTags">
          <label *ngFor="let tag of tags; let i = index" class="flex items-center">
            <input type="checkbox" [value]="tag.tag_id" (change)="onTagChange($event)" class="mr-2">
            <span>{{ tag.tag_name }}</span>
          </label>
        </div>
      </div>

      <div class="mb-4"> <!-- Bestätigungsmeldung unter Tags -->
        <div *ngIf="confirmationMessage" class="bg-green-100 text-green-800 p-2 rounded text-center">
          {{ confirmationMessage }}
        </div>
      </div>
      <div class="flex justify-end gap-4 mt-6"> <!-- UNTERE ZEILE MIT BUTTONS -->
      <!-- Flexbox-Layout, Elemente rechts ausrichten, 16px Abstand zwischen Elementen, 
           24px Abstand nach oben -->
        <button type="button" (click)="confirmCloseDialog()" class="bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg hover:bg-gray-300"> 
        <!-- hellgrauer Hintergrund, dunkelgrauer Text, fette Schrift, 8px Innenabstand o/u, 
             16px Innenabstand l/r, abgerundete Ecken, dunklerer Grau beim Hover -->
          Abbrechen
        </button>
        <!--HIER TODO : WIRKLICH SCHLIESSEN? DIALOG ÖFFNEN-->


        <button type="submit" [disabled]="taskForm.invalid" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-blue-700"> 
        <!-- Automatisch erstmal deaktiviert, solange nicht alle Pflichtfelder ausgefüllt sind, blauer Hintergrund, weißer Text, fette Schrift, 8px Innenabstand o/u, 
             16px Innenabstand l/r, abgerundete Ecken, mittlerer Schatten, dunkleres Blau beim Hover -->
          Speichern
        </button>
      </div>
    </form>

  </div>
</div>